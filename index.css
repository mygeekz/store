/* بارگذاری قلم وزیر */
@import './styles/themes.css';
@import '@fortawesome/fontawesome-free/css/all.min.css';

@font-face {
  font-family: 'Vazir';
  src: url('/fonts/Vazir-FD-WOL.woff2') format('woff2'),
       url('/fonts/Vazir-FD-WOL.woff') format('woff');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
}

/* ===== Premium Reports UI (Reusable) ===== */
@layer components {
  .report-page {
    @apply space-y-6 text-right w-full;
  }

  .report-surface {
    @apply rounded-2xl border border-gray-200 bg-white shadow-[0_10px_30px_-18px_rgba(15,23,42,0.45)] dark:bg-gray-900 dark:border-gray-800;
  }

  .report-surface-inner {
    @apply p-5 sm:p-6;
  }

  .report-surface-header {
    @apply flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between pb-4 mb-5 border-b border-gray-200/70 dark:border-gray-800/80;
  }

  .report-title {
    @apply text-lg sm:text-xl font-extrabold text-gray-900 dark:text-gray-100;
  }

  .report-subtitle {
    @apply text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-1;
  }

  .report-input {
    @apply w-full sm:w-72 h-10 px-3 rounded-xl border border-gray-200 bg-white text-gray-800 placeholder:text-gray-400 shadow-sm outline-none
      focus:border-gray-300 focus:ring-2 focus:ring-gray-900/10
      dark:bg-gray-950 dark:border-gray-800 dark:text-gray-100 dark:placeholder:text-gray-500 dark:focus:ring-gray-100/10;
  }

  .report-btn {
    @apply inline-flex items-center justify-center gap-2 h-10 px-3 rounded-xl border border-gray-200 bg-white text-gray-800 text-sm font-semibold
      hover:bg-gray-50 hover:border-gray-300 active:scale-[0.99] transition
      dark:bg-gray-950 dark:text-gray-100 dark:border-gray-800 dark:hover:bg-gray-900;
  }

  .report-btn-primary {
    @apply inline-flex items-center justify-center gap-2 h-10 px-4 rounded-xl bg-gray-900 text-white text-sm font-semibold shadow-sm
      hover:bg-gray-800 active:scale-[0.99] transition
      dark:bg-white dark:text-gray-900 dark:hover:bg-gray-100;
  }

  .report-empty {
    @apply py-12 text-center text-gray-500 dark:text-gray-400;
  }

  .report-table {
    @apply w-full text-sm;
  }

  .report-th {
    @apply text-xs font-bold text-gray-500 dark:text-gray-400 px-3 py-2 border-b border-gray-200/80 dark:border-gray-800/80;
  }

  .report-td {
    @apply px-3 py-2 border-b border-gray-100 dark:border-gray-800/60;
  }

  .kpi-grid {
    @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3;
  }

  .kpi-card {
    @apply rounded-2xl border border-gray-200 bg-white p-4 shadow-[0_10px_30px_-22px_rgba(15,23,42,0.4)]
      dark:bg-gray-900 dark:border-gray-800;
  }

  .kpi-label {
    @apply text-xs font-bold text-gray-500 dark:text-gray-400;
  }

  .kpi-value {
    @apply mt-2 text-xl font-extrabold text-gray-900 dark:text-gray-100;
  }

  .kpi-hint {
    @apply mt-1 text-xs text-gray-500 dark:text-gray-400;
  }
}

/* استایل پایه اپ */
@layer base {
  html {
    /* تایپوگرافی سیال برای موبایل: با تغییر رزولوشن، اندازه‌ها نرم تغییر می‌کنند */
    font-size: clamp(14px, 3.2vw, 16px);
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }

  body {
    @apply bg-gray-50 text-gray-800 dark:bg-gray-900 dark:text-gray-200 transition-colors duration-300;
    font-family: 'Vazir', Tahoma, sans-serif;
    direction: rtl;
    -webkit-tap-highlight-color: transparent;
    overscroll-behavior-y: none;
  }

  /* جلوگیری از اسکرول افقی تصادفی روی موبایل */
  html,
  body,
  #root {
    width: 100%;
    max-width: 100%;
    overflow-x: hidden;
  }

  /* ارتفاع صحیح روی موبایل (iOS/Chrome): dvh ویوپورت واقعی را لحاظ می‌کند */
  body,
  #root {
    min-height: 100dvh;
  }
}

@layer components {
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* Mobile optimizations */
@media (max-width: 768px) {
  /* Make buttons larger for touch */
  button, a {
    @apply min-h-[44px] min-w-[44px] flex items-center justify-center;
  }
  
  /* Inputs */
  input, select, textarea {
    @apply text-base !important; /* Prevent zoom on iOS */
  }
}

/* App splash/boot loader (used in index.html + React Suspense fallback) */
.app-splash {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  background: transparent;
}

.app-splash__bg {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(1200px 600px at 20% 10%, rgba(99, 102, 241, 0.12), transparent 60%),
    radial-gradient(1000px 500px at 80% 30%, rgba(244, 63, 94, 0.10), transparent 55%),
    radial-gradient(900px 500px at 50% 80%, rgba(14, 165, 233, 0.10), transparent 55%);
}

.app-splash__content {
  position: relative;
  width: min(360px, calc(100vw - 48px));
  padding: 40px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  /* Removed box background, border, and shadow for a more open, modern feel */
}

.dark .app-splash__content {
  /* Box removal inherited */
}

.app-splash__mark {
  position: relative;
  width: 120px;
  height: 120px;
  margin-inline: auto;
  display: flex;
  align-items: center;
  justify-content: center;
}

.app-splash__ring {
  position: absolute;
  inset: 0;
  border-radius: 999px;
  background: conic-gradient(from 0deg, transparent 30%, hsl(var(--primary)));
  -webkit-mask: radial-gradient(farthest-side, transparent calc(100% - 4px), #000 100%);
  mask: radial-gradient(farthest-side, transparent calc(100% - 4px), #000 100%);
  animation: app-splash-spin 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
}

.app-splash__mark::before {
  display: none; /* Removed the inner solid circle */
}

.app-splash__dot {
  position: absolute;
  width: 60px;
  height: 60px;
  border-radius: 999px;
  background: radial-gradient(circle at center, hsl(var(--primary) / 0.15), transparent 70%);
  display: flex;
  align-items: center;
  justify-content: center;
  animation: app-splash-pulse 2s ease-in-out infinite;
}

.app-splash__dot::after {
  content: '';
  width: 12px;
  height: 12px;
  background: hsl(var(--primary));
  border-radius: 50%;
  box-shadow: 0 0 20px hsl(var(--primary));
}

.app-splash__pulse {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: rgba(100, 116, 139, 0.35);
  animation: app-splash-dots 900ms ease-in-out infinite;
}

.dark .app-splash__pulse {
  background: rgba(148, 163, 184, 0.35);
}

@keyframes app-splash-spin {
  to { transform: rotate(360deg); }
}

@keyframes app-splash-pulse {
  0%, 100% { transform: scale(0.8); opacity: 0.5; }
  50% { transform: scale(1.1); opacity: 1; }
}

@keyframes app-splash-dots {
  0%, 100% { transform: translateY(0); opacity: 0.45; }
  50% { transform: translateY(-4px); opacity: 1; }
}

/* subtle skeleton shimmer */
@keyframes shimmer {
  100% { transform: translateX(100%); }
}

@media (prefers-reduced-motion: reduce) {
  .app-splash__ring,
  .app-splash__dot,
  .app-splash__pulse {
    animation: none !important;
  }
}

/* استایل مخصوص چاپ */
@media print {
  /* جلوگیری از چاپ هدر و فوتر مرورگر */
  @page {
    size: A4;
    margin: 10mm;
  }

  /* پنهان کردن المان‌هایی که کلاس print:hidden دارند */
  .print\:hidden {
    display: none !important;
  }

  /* پس‌زمینهٔ سفید و قلم */
  html, body {
    width: 210mm;
    min-height: 297mm;
    margin: 0 auto;
    padding: 0;
    background: #fff !important;
    color: #222 !important;
    font-family: 'Vazir', Tahoma, sans-serif;
    direction: rtl;
    font-size: 13px;
    line-height: 1.5;
  }

  /* کانتینر فاکتور */
  .receipt-container {
    width: 100%;
    max-width: 190mm;
    margin: 0 auto;
    padding: 0;
    box-sizing: border-box;
  }

  /* Header */
  .receipt-container .header {
    text-align: center;
    margin-bottom: 6mm;
  }
  .receipt-container .store-name {
    font-size: 26px;
    font-weight: 700;
    color: #2c3e50;
    margin-bottom: 2px;
  }
  .receipt-container .divider {
    width: 60px;
    height: 3px;
    background: #2980b9;
    margin: 8px auto 12px;
  }
  .receipt-container .store-info {
    font-size: 12px;
    color: #555;
    line-height: 1.4;
  }

  /* Meta */
  .receipt-container .meta {
    display: flex;
    justify-content: space-between;
    margin-bottom: 8mm;
    font-size: 13px;
    color: #333;
  }
  .receipt-container .meta > div {
    width: 48%;
  }

  /* جدول آیتم‌ها */
  .receipt-container table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 8mm;
    page-break-inside: avoid;
  }
  .receipt-container thead th {
    background: #ecf0f1;
    color: #2c3e50;
    font-weight: 600;
    padding: 8px;
    border-bottom: 2px solid #bdc3c7;
    text-align: right;
    font-size: 13px;
  }
  .receipt-container tbody td {
    padding: 6px 8px;
    border-bottom: 1px solid #ddd;
    text-align: right;
    color: #333;
    font-size: 13px;
  }
  .receipt-container tbody tr:nth-child(even) {
    background: #fafafa;
  }

  /* باکس خلاصه */
  .receipt-container .summary {
    background: #f7f9fa;
    border: 1px solid #dde4ea;
    border-radius: 6px;
    padding: 8px 12px;
    margin-bottom: 8mm;
    font-size: 13px;
  }
  .receipt-container .summary-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 4px;
  }
  .receipt-container .summary-row .label {
    font-weight: 600;
    color: #2c3e50;
  }
  .receipt-container .summary-row .value {
    color: #2c3e50;
  }

  /* یادداشت‌ها */
  .receipt-container .notes {
    font-size: 11px;
    font-style: italic;
    color: #555;
    margin-bottom: 10mm;
  }

  /* امضاها */
  .receipt-container .signatures {
    display: flex;
    justify-content: space-between;
    font-size: 11px;
    margin-top: 15mm;
  }
  .receipt-container .sig-box {
    width: 45%;
    text-align: center;
  }
  .receipt-container .sig-line {
    border-top: 1px solid #333;
    margin-top: 12mm;
  }
}

/* =========================
   Premium Reports (BI-like)
   Applies to everything rendered under ReportsLayout.
   ========================= */

.report-page {
  max-width: 1400px;
  margin: 0 auto;
}

/* Make legacy report pages look consistently premium without rewriting each one */
.report-page :where(.card, .panel, .box) {
  border-radius: 16px;
}

.report-page :where(input[type="text"], input[type="number"], input[type="search"], select, textarea) {
  border-radius: 14px;
}

.report-page :where(table) {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  overflow: hidden;
  border: 1px solid rgba(148, 163, 184, 0.35);
  border-radius: 16px;
  background: rgba(255,255,255,0.7);
}

.report-page :where(thead th) {
  position: sticky;
  top: 0;
  background: rgba(248, 250, 252, 0.9);
  backdrop-filter: blur(8px);
  color: rgb(15 23 42);
  font-weight: 800;
  font-size: 12px;
  padding: 10px 12px;
  border-bottom: 1px solid rgba(148, 163, 184, 0.35);
  z-index: 1;
}

.report-page :where(tbody td) {
  font-size: 12px;
  padding: 10px 12px;
  border-bottom: 1px solid rgba(226, 232, 240, 0.7);
  color: rgb(30 41 59);
}

/* Force readability: some legacy report pages set low opacity / light text classes */
.report-page :where(table th, table td) {
  opacity: 1 !important;
  color: rgb(15 23 42) !important;
}

.report-page :where(tbody tr:nth-child(2n)) {
  background: rgba(255, 255, 255, 0.35);
}

.report-page :where(tbody tr:hover) {
  background: rgba(59, 130, 246, 0.06);
}

@media (prefers-color-scheme: dark) {
  .report-page :where(table) {
    border-color: rgba(148, 163, 184, 0.20);
    background: rgba(2, 6, 23, 0.25);
  }
  .report-page :where(thead th) {
    background: rgba(2, 6, 23, 0.65);
    color: rgb(226 232 240);
    border-bottom-color: rgba(148, 163, 184, 0.20);
  }
  .report-page :where(tbody td) {
    color: rgb(226 232 240);
    border-bottom-color: rgba(148, 163, 184, 0.12);
  }
  .report-page :where(table th, table td) {
    opacity: 1 !important;
    color: rgb(226 232 240) !important;
  }
  .report-page :where(tbody tr:nth-child(2n)) {
    background: rgba(2, 6, 23, 0.12);
  }
  .report-page :where(tbody tr:hover) {
    background: rgba(59, 130, 246, 0.10);
  }
}

@media print {
  /* Reports: hide glass/blur and make tables crisp */
  .report-page {
    max-width: none;
  }
  /* Many pages use dark-mode text (white) on colored cards.
     In print/PDF, backgrounds may not render → text becomes invisible.
     Force readable colors for ALL report content. */
  .report-page,
  .report-page * {
    color: #111827 !important;
    opacity: 1 !important;
    text-shadow: none !important;
  }
  /* Card-like blocks: give a subtle border so sections don't disappear on white */
  .report-page :where(.rounded-xl, .rounded-2xl, .rounded-3xl) {
    border: 1px solid #e5e7eb !important;
    box-shadow: none !important;
  }
  .report-page :where(table) {
    background: #fff !important;
    border-color: #d1d5db !important;
  }
  .report-page :where(thead th) {
    background: #f3f4f6 !important;
    color: #111827 !important;
  }
  .report-page :where(tbody td) {
    color: #111827 !important;
  }
}

.summary-row .value {
  color: #1f2937;
  direction: ltr;        /* ← اعداد چپ به راست */
  unicode-bidi: plaintext;
}

/* استایل عمومی برای سایدبار */
.sidebar {
  width: 250px;
  background-color: #2c3e50;
  padding: 20px;
  color: white;
}

/* استایل برای هر آیتم سایدبار */
.sidebar-item {
  display: flex;
  align-items: center;
  padding: 15px;
  margin: 10px 0;
  cursor: pointer;
  transition: transform 0.3s ease;
}

/* استایل آیکون‌های سایدبار */
.sidebar-icon {
  font-size: 24px;
  margin-right: 10px;
}

/* استایل برای متن هر آیتم */
.sidebar-item span {
  font-size: 18px;
}

@keyframes glowPulse {
  0%   { opacity: .25; transform: scale(1); }
  50%  { opacity: .4;  transform: scale(1.04); }
  100% { opacity: .25; transform: scale(1); }
}
.motion-safe .animate-glow { animation: glowPulse 1.6s ease-in-out infinite; }

/* --- gradient breathing --- */
@keyframes gradientShift {
  0%   { background-position: 0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
.animate-gradient {
  background-size: 200% 200%;
  animation: gradientShift 8s ease-in-out infinite;
}

/* --- shimmering sweep (light streak) --- */
@keyframes shineSweep {
  0%   { transform: translateX(-150%) skewX(-20deg); }
  100% { transform: translateX(150%)  skewX(-20deg); }
}
.animate-shine { animation: shineSweep 3.8s linear infinite; }

/* --- floating glow orbs --- */
@keyframes orbFloat {
  0%,100% { transform: translateY(-6px) scale(1); }
  50% { transform: translateY(6px) scale(1.04); }
}
.orb { filter: blur(24px); mix-blend-mode: screen; animation: orbFloat 6s ease-in-out infinite; }

/* --- soft moving beams (striped light) --- */
@keyframes beamsPan {
  0%   { background-position: 0% 0; }
  100% { background-position: 200% 0; }
}
.beams {
  background-image:
    linear-gradient(90deg, rgba(255,255,255,.10) 0%, rgba(255,255,255,0) 30%,
                           rgba(255,255,255,.08) 60%, rgba(255,255,255,0) 100%);
  background-size: 200% 100%;
  opacity: .35;
  animation: beamsPan 12s linear infinite;
  mix-blend-mode: screen;
}

/* --- tiny twinkles --- */
@keyframes twinkle {
  0%,100% { opacity: .15; transform: scale(0.8) }
  50%     { opacity: .9;  transform: scale(1) }
}
.sparkle {
  width: 6px; height: 6px; border-radius: 9999px;
  background: rgba(255,255,255,.9);
  filter: drop-shadow(0 0 6px rgba(255,255,255,.7));
  animation: twinkle 2.4s ease-in-out infinite;
}

@media (prefers-reduced-motion: reduce) {
  .animate-gradient, .animate-shine, .orb, .beams, .sparkle { animation: none !important; }
}

/* === Shiny Text (reactbits-style) === */
@layer utilities {
  @keyframes shine {
    0%   { background-position-x: 0%; }
    100% { background-position-x: 200%; }
  }
  .shiny-text {
    background-image: linear-gradient(
      90deg,
      rgba(255,255,255,0.15) 0%,
      rgba(255,255,255,0.95) 50%,
      rgba(255,255,255,0.15) 100%
    );
    background-size: 200% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 0 0 18px rgba(255,255,255,0.15);
    animation: shine 2.2s linear infinite;
  }
}

/* === Variable Proximity base styles === */
@layer utilities {
  .vp-wrapper {
    position: relative;
    display: inline-flex;
    flex-wrap: wrap;
    cursor: default;
    line-height: 1.15;
    will-change: transform;
  }
  .vp-letter {
    display: inline-block;
    transition:
      font-variation-settings 90ms linear,
      font-weight 90ms linear,
      transform 90ms linear,
      opacity 90ms linear;
    will-change: font-variation-settings, transform, opacity;
    font-variation-settings: "wght" 300;
    transform-origin: center center;
  }
}

@keyframes gradient-shift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* کلاس‌های کمکی */
.text-gradient-animated {
  background-image: linear-gradient(90deg, #a78bfa 0%, #22d3ee 50%, #34d399 100%);
  background-size: 200% auto;
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  animation: gradient-shift 8s ease infinite;
}

/* ===== Customizable Dashboard (react-grid-layout) ===== */
.rtl-dashboard {
  direction: rtl;
}

.rtl-dashboard .react-grid-layout {
  direction: ltr;
}

.rtl-dashboard .react-grid-item {
  transition: transform 200ms ease, width 200ms ease, height 200ms ease;
}

.rtl-dashboard .react-grid-item.react-grid-placeholder {
  background: rgba(99, 102, 241, 0.15);
  border: 1px dashed rgba(99, 102, 241, 0.5);
  border-radius: 1rem;
}

.rtl-dashboard .react-resizable-handle {
  opacity: 0.7;
  filter: drop-shadow(0 2px 8px rgba(0,0,0,0.15));
}

.rtl-dashboard .react-resizable-handle:hover {
  opacity: 1;
}

/* Make resize handle a bit easier to grab on touch */
@media (pointer: coarse) {
  .rtl-dashboard .react-resizable-handle {
    width: 22px;
    height: 22px;
  }
}

/* Simple line-clamp utilities (no tailwind plugin needed) */
.line-clamp-1,
.line-clamp-2 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
}
.line-clamp-1 { -webkit-line-clamp: 1; }
.line-clamp-2 { -webkit-line-clamp: 2; }

/* Swapy (drag-to-swap) styling */
[data-swapy-highlighted] {
  outline: 2px dashed rgba(99, 102, 241, 0.35);
  outline-offset: 6px;
  border-radius: 24px;
}
[data-swapy-dragging] {
  transform: scale(1.02);
  box-shadow: 0 20px 70px rgba(0,0,0,0.18);
  border-radius: 24px;
}

/* Improve Swapy dragging */
[data-swapy-handle] {
  user-select: none;
  -webkit-user-select: none;
  touch-action: none;
  cursor: grab;
}
[data-swapy-dragging] [data-swapy-handle] {
  cursor: grabbing;
}

/* smoother grid transitions */
.react-grid-item {
  transition: transform 220ms ease, width 220ms ease, height 220ms ease;
}

.react-grid-item.react-draggable-dragging {
  transition: none;
  z-index: 50;
}

.react-grid-placeholder {
  border-radius: 16px;
  opacity: 0.18;
}

/* ───────────────────────────── App Design System helpers ───────────────────────────── */
@layer components {
  /* A unified card surface used across list pages, toolbars, widgets, etc. */
  .app-card {
    @apply relative overflow-hidden rounded-2xl;
    @apply bg-white/90 dark:bg-white/5;
    @apply border border-black/10 dark:border-white/10;
    @apply shadow-[0_18px_50px_-38px_rgba(2,6,23,0.55)];
    @apply backdrop-blur-sm;
  }

  /* Premium border glow */
  .app-card::before {
    content: "";
    @apply pointer-events-none absolute inset-0 rounded-2xl;
    background: radial-gradient(1200px 400px at 80% 0%, rgba(13,148,136,0.18), transparent 55%),
                radial-gradient(900px 300px at 10% 100%, rgba(59,130,246,0.14), transparent 60%);
    opacity: 0.9;
  }

  .app-card > * {
    @apply relative;
  }

  .app-card-muted {
    @apply rounded-2xl bg-black/[0.02] dark:bg-white/[0.03];
    @apply border border-black/10 dark:border-white/10;
  }

  
  /* Premium tables inside cards */
  .app-card table {
    @apply w-full border-separate border-spacing-0;
  }
  .app-card thead th {
    @apply text-xs font-extrabold text-gray-700 dark:text-gray-200;
    @apply bg-black/[0.03] dark:bg-white/[0.06];
    @apply px-3 py-2 text-right;
    @apply border-b border-black/10 dark:border-white/10;
  }
  .app-card tbody td {
    @apply px-3 py-2 text-sm text-gray-800 dark:text-gray-100;
    @apply border-b border-black/5 dark:border-white/5;
  }
  .app-card tbody tr:hover td {
    @apply bg-black/[0.02] dark:bg-white/[0.04];
  }
  .app-card tbody tr:last-child td {
    @apply border-b-0;
  }
  .app-card .table-note {
    @apply text-xs text-gray-500 dark:text-gray-400;
  }
.app-section-title {
    @apply text-sm md:text-base font-semibold text-text;
  }

  .app-subtle {
    @apply text-xs md:text-sm text-muted;
  }

  /* Unified form controls */
  .app-label {
    @apply block text-xs font-bold text-gray-600 dark:text-gray-300 mb-1;
  }

  .app-input,
  .app-select,
  .app-textarea {
    @apply w-full rounded-2xl;
    @apply bg-white/100 dark:bg-gray-950/40;
    @apply border border-black/10 dark:border-white/10;
    @apply text-sm text-gray-900 dark:text-gray-100;
    @apply outline-none;
    /* Tailwind may not generate `ring-primary/xx` if `primary` lacks <alpha-value>. */
    @apply focus:ring-2;
    @apply focus:ring-[hsl(var(--primary)/0.30)];
  }

  .app-input,
  .app-select {
    @apply h-11 px-3;
  }

  .app-textarea {
    @apply min-h-[96px] p-3;
  }

  .app-help {
    @apply mt-1 text-[11px] text-gray-500 dark:text-gray-400;
  }

  .app-error {
    @apply mt-1 text-[11px] text-red-600 dark:text-red-400;
  }
}


/* === REPORTS PREMIUM COMPONENTS === */
@layer components {
  .report-page {
    @apply space-y-4;
  }
  .report-toolbar {
    @apply flex flex-wrap items-center justify-between gap-2 rounded-2xl border border-gray-200/70 bg-white p-3 shadow-sm dark:border-slate-800 dark:bg-slate-900/60;
  }
  .report-toolbar .rt-left,
  .report-toolbar .rt-right {
    @apply flex flex-wrap items-center gap-2;
  }
  .report-action {
    @apply inline-flex items-center gap-2 rounded-xl px-3 py-2 text-sm font-semibold transition;
    @apply ring-1 ring-transparent hover:ring-gray-200/70 dark:hover:ring-slate-700;
  }
  .report-action-primary {
    @apply bg-[hsl(var(--primary)/0.12)] text-gray-900 dark:text-slate-50;
    @apply hover:bg-[hsl(var(--primary)/0.16)] ring-1 ring-[hsl(var(--primary)/0.20)];
  }
  .report-action-muted {
    @apply bg-gray-100 text-gray-900 hover:bg-gray-200/70 dark:bg-white/5 dark:text-slate-100 dark:hover:bg-white/10;
  }
  .kpi-grid {
    @apply grid grid-cols-1 gap-3 md:grid-cols-2 xl:grid-cols-4;
  }
  .kpi-card {
    @apply relative overflow-hidden rounded-2xl border border-gray-200/70 bg-white p-4 shadow-sm transition hover:shadow-md;
    @apply dark:border-slate-800 dark:bg-slate-900/60;
  }
  .kpi-card:before {
    content: "";
    position: absolute;
    inset-inline-start: 0;
    top: 0;
    height: 3px;
    width: 100%;
    background: linear-gradient(90deg, hsl(var(--primary)/0.65), transparent);
    opacity: 0.55;
  }
  .kpi-label { @apply text-xs text-gray-500 dark:text-gray-400; }
  .kpi-value { @apply mt-2 text-2xl font-extrabold tracking-tight text-gray-900 dark:text-slate-50; }
  .kpi-sub { @apply mt-1 text-xs text-gray-500 dark:text-gray-400; }

  .section-card {
    @apply rounded-2xl border border-gray-200/70 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900/60;
  }
  .section-header {
    @apply flex flex-wrap items-center justify-between gap-2 border-b border-gray-200/70 px-4 py-3 dark:border-slate-800;
  }
  .section-title { @apply text-sm font-bold text-gray-900 dark:text-slate-50; }
  .section-desc { @apply text-xs text-gray-500 dark:text-gray-400; }
  .section-body { @apply p-4; }

  .report-table {
    @apply w-full text-sm;
  }
  .report-table th {
    @apply whitespace-nowrap border-b border-gray-200/70 px-3 py-2 text-right text-xs font-bold text-gray-600 dark:border-slate-800 dark:text-gray-300;
  }
  .report-table td {
    @apply border-b border-gray-200/50 px-3 py-2 align-middle text-gray-800 dark:border-slate-800/80 dark:text-gray-100;
  }
  .report-table tr:hover td {
    @apply bg-gray-50/100 dark:bg-white/5;
  }
  .empty-state {
    @apply rounded-2xl border border-dashed border-gray-300 bg-white p-6 text-center text-sm text-gray-600 dark:border-slate-700 dark:bg-slate-900/40 dark:text-gray-300;
  }

  /* === TELEGRAM (Premium) === */
  .tg-panel {
    @apply relative overflow-hidden rounded-3xl border border-gray-200/70 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900/60;
  }
  .tg-panel__bar {
    @apply h-1.5 w-full;
    background: linear-gradient(90deg, hsl(var(--primary)/0.85), rgba(99,102,241,0.55), rgba(20,184,166,0.55));
  }
  .tg-panel__header {
    @apply flex flex-col gap-3 p-4 md:flex-row md:items-center md:justify-between;
  }
  .tg-panel__title { @apply text-base font-extrabold text-gray-900 dark:text-slate-50; }
  .tg-panel__subtitle { @apply mt-1 text-xs text-gray-500 dark:text-gray-400; }
  .tg-panel__meta { @apply flex flex-wrap items-center gap-2; }
  .tg-chip {
    @apply inline-flex items-center gap-2 rounded-xl border border-gray-200/70 bg-gray-50 px-3 py-1.5 text-xs font-bold text-gray-700 dark:border-slate-800 dark:bg-white/5 dark:text-gray-200;
  }
  .tg-panel__actions { @apply flex items-center gap-2; }
  .tg-btn {
    @apply inline-flex items-center justify-center gap-2 rounded-xl px-3 py-2 text-sm font-extrabold transition active:scale-[0.99] disabled:opacity-60;
    @apply border border-gray-200/70 bg-white text-gray-900 hover:bg-gray-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-100 dark:hover:bg-white/5;
  }
  .tg-btn--ghost { @apply bg-transparent hover:bg-gray-50 dark:hover:bg-white/5; }
  .tg-btn--primary {
    @apply border-transparent text-white;
    background: linear-gradient(135deg, hsl(var(--primary)/0.95), rgba(99,102,241,0.95));
  }
  .tg-btn--primary:hover { filter: brightness(1.03); }
  .tg-btn--indigo { @apply border-transparent text-white bg-indigo-600 hover:bg-indigo-700; }

  .tg-grid { @apply grid grid-cols-1 gap-4 p-4 pt-0 xl:grid-cols-5; }
  .tg-stack { @apply space-y-4 xl:col-span-2; }
  .tg-card {
    @apply rounded-2xl border border-gray-200/70 bg-white p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60;
  }
  .tg-card--wide { @apply xl:col-span-3; }
  .tg-card__head { @apply flex items-start justify-between gap-3; }
  .tg-card__head--split { @apply flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between; }
  .tg-card__title { @apply text-sm font-extrabold text-gray-900 dark:text-slate-50; }
  .tg-card__hint { @apply text-xs text-gray-500 dark:text-gray-400; }
  .tg-card__foot { @apply mt-2 flex items-center justify-between text-xs; }
  .tg-muted { @apply text-gray-500 dark:text-gray-400; }
  .tg-strong { @apply font-extrabold text-gray-900 dark:text-slate-50; }

  .tg-textarea {
    @apply mt-3 w-full min-h-[160px] rounded-2xl border border-gray-200 bg-white px-3 py-2 text-sm outline-none;
    @apply focus:ring-2 focus:ring-[hsl(var(--primary)/0.25)] dark:border-slate-800 dark:bg-slate-950/40 dark:text-slate-100;
  }
  .tg-textarea--mono { @apply font-mono min-h-[180px]; }
  .tg-select {
    @apply rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm font-bold text-gray-800 outline-none;
    @apply focus:ring-2 focus:ring-[hsl(var(--primary)/0.25)] dark:border-slate-800 dark:bg-slate-950/40 dark:text-slate-100;
  }

  .tg-vars { @apply mt-3 flex flex-wrap gap-2; }
  .tg-var {
    @apply inline-flex rounded-xl border border-gray-200/70 bg-gray-50 px-2 py-1 text-[11px] font-mono text-gray-700 dark:border-slate-800 dark:bg-white/5 dark:text-gray-200;
  }

  .tg-actions-row { @apply mt-3 flex flex-wrap items-center gap-2; }

  .tg-switches { @apply mt-3 grid grid-cols-1 gap-2; }
  .tg-switch {
    @apply flex items-center gap-3 rounded-2xl border border-gray-200/70 bg-white px-3 py-2 text-right transition;
    @apply hover:bg-gray-50 dark:border-slate-800 dark:bg-slate-950/30 dark:hover:bg-white/5;
  }
  .tg-switch--on {
    @apply border-[hsl(var(--primary)/0.35)];
    background: linear-gradient(135deg, hsl(var(--primary)/0.10), rgba(99,102,241,0.06));
  }
  .tg-switch__dot {
    @apply h-2.5 w-2.5 rounded-full bg-gray-300 dark:bg-slate-700;
  }
  .tg-switch--on .tg-switch__dot { @apply bg-[hsl(var(--primary)/0.9)]; }
  .tg-switch__label { @apply text-sm font-bold text-gray-900 dark:text-slate-50; }
  .tg-switch__key { @apply ms-auto text-[11px] font-mono text-gray-400; }

  .tg-preview {
    @apply mt-4 rounded-2xl border border-gray-200/70 bg-gray-50 p-4 dark:border-slate-800 dark:bg-slate-950/30;
  }
  .tg-preview__title { @apply mb-2 text-xs font-extrabold text-gray-600 dark:text-gray-300; }
  .tg-preview__body { @apply whitespace-pre-wrap text-sm text-gray-900 dark:text-slate-100; }
  .tg-preview--empty { @apply text-sm text-gray-500 dark:text-gray-400; }

  .tg-sample { @apply mt-4 text-xs text-gray-500 dark:text-gray-400; }
  .tg-sample summary { @apply cursor-pointer select-none font-bold; }
  .tg-sample pre { @apply mt-2 whitespace-pre-wrap; }
}
